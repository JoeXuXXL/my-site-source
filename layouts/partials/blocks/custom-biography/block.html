{{/* Initialize variables */}}
{{ $page := .Page }}
{{ $biography := site.Params.authors.admin.biography | default (index site.Data.authors "admin").biography }}
{{ $headings := .headings | default (dict "about" "About me" "education" "Education" "interests" "Research Interests") }}

<section class="flex flex-col md:flex-row gap-8 md:gap-12 items-start">
  <!-- Left column with avatar and basic info -->
  <div class="w-full md:w-1/3 flex flex-col items-center md:items-start">
    {{ $avatar := (.resources.ByType "image").GetMatch "*avatar*" }}
    {{ with $avatar }}
      {{ $avatar_image := .Fill "400x400 Center" }}
      <img class="rounded-full mb-6 w-48 h-48 object-cover" width="{{ $avatar_image.Width }}" 
           height="{{ $avatar_image.Height }}" src="{{ $avatar_image.RelPermalink }}" 
           alt="{{ $biography.name }}">
    {{ end }}

    <h1 class="text-2xl font-bold text-center md:text-left mb-2">{{ $biography.name }}</h1>
    {{ with $biography.role }}<div class="text-neutral-500 dark:text-neutral-400 mb-6 text-center md:text-left">{{ . | markdownify | emojify }}</div>{{ end }}

    <!-- Social icons with labels -->
    <div class="flex flex-col space-y-3 w-full mb-6">
      {{ range site.Params.social }}
        {{ if .url }}
          <a href="{{ .url }}" target="_blank" rel="noopener" class="flex items-center text-sm text-neutral-700 dark:text-neutral-300 hover:text-primary-600 dark:hover:text-primary-500">
            {{ with .icon }}
              <span class="mr-2">{{ partial "icon" (dict "name" . "size" "5") }}</span>
            {{ end }}
            <span>{{ .label }}</span>
          </a>
        {{ else }}
          <div class="flex items-center text-sm text-neutral-700 dark:text-neutral-300">
            {{ with .icon }}
              <span class="mr-2">{{ partial "icon" (dict "name" . "size" "5") }}</span>
            {{ end }}
            <span>{{ .label }}</span>
          </div>
        {{ end }}
      {{ end }}
    </div>
  </div>

  <!-- Right column with content -->
  <div class="w-full md:w-2/3">
    <!-- About section without prominent heading -->
    {{ with $biography.summary }}
      <div class="prose dark:prose-invert max-w-none mb-8">
        {{ . | markdownify | emojify }}
      </div>
    {{ end }}

    <!-- Two-column section for Education and Interests -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
      <!-- Interests on the LEFT column -->
      {{ with $biography.interests }}
        <div>
          <h3 class="text-sm uppercase tracking-wider text-neutral-500 dark:text-neutral-400 mb-3 font-medium">{{ $headings.interests }}</h3>
          <div class="flex flex-wrap gap-2">
            {{ range . }}
              <span class="text-xs bg-neutral-100 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300 px-3 py-1 rounded-full">{{ . | markdownify | emojify }}</span>
            {{ end }}
          </div>
        </div>
      {{ end }}

      <!-- Education on the RIGHT column -->
      {{ with $biography.education }}
        <div>
          <h3 class="text-sm uppercase tracking-wider text-neutral-500 dark:text-neutral-400 mb-3 font-medium">{{ $headings.education }}</h3>
          <div class="space-y-4">
            {{ range . }}
              {{ with .degree }}
                <div>
                  <h4 class="font-medium text-neutral-900 dark:text-neutral-100">{{ . | markdownify | emojify }}</h4>
                  {{ with .description }}<div class="text-sm text-neutral-600 dark:text-neutral-400 mt-1">{{ . | markdownify | emojify }}</div>{{ end }}
                </div>
              {{ end }}
            {{ end }}
          </div>
        </div>
      {{ end }}
    </div>
  </div>
</section>